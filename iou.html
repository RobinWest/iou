<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>iou</title>
</head>

<body>
	<div class="content-container iou">
		<div class="pure-g">
			<div class="pure-u-1-2">
				<h1 class="iouHeader">iou</h1>
			</div>
			{{#if currentUser}}
				<div class="pure-u-1-2">{{> signOut}}</div>
			{{/if}}
		</div>
		<hr>
		<!-- <h3>Add a user</h3>
		{{> addUser}} -->

		{{#if resetPassword}}
			{{> resetPassword}}
		{{else}}
			{{#if currentUser}}
				{{> iouTables}}
				<hr>
				{{> iouForm}}
			{{else}}
				{{#if showForgotPassword}}
					{{> passwordReset}}
				{{else}}
					{{> signInForm}}
					<hr>
					{{> signUpForm}}
				{{/if}}
			{{/if}}
		{{/if}}
	</div>
</body>

<template name="passwordReset">
	
</template>

<template name="resetPassword">
	
</template>

<template name="signOut">
	<div class="iouSignOut">
		Hello, {{name}}
		<a id="signOut-logout">(Logout)</a>
	</div>
</template>

<template name="signInForm">
	<div class="iouSignIn">
		<h2>Sign in</h2>
		<div class="pure-g">
			<div class="pure-u-1 pure-u-md-1-3">
				<input type="text" placeholder="email" id="signInForm-email">
			</div>
			<div class="pure-u-1 pure-u-md-1-3">
				<input type="password" placeholder="password" id="signInForm-password">
			</div>
			<div class="pure-u-1 pure-u-md-1-3">
				<div id="signInForm-submit" class="iouButton">Sign in</div>
			</div>
		</div>
	</div>
</template>

<template name="signUpForm">
	<div class="iouSignUp">
		<h3>or sign up</h3>
		<div class="pure-g">
			<div class="pure-u-1 pure-u-md-1-2">
				<input type="text" placeholder="name" id="signUpForm-name">
			</div>
			<div class="pure-u-1 pure-u-md-1-2">
				<input type="text" placeholder="email" id="signUpForm-email">
			</div>
			<div class="pure-u-1 pure-u-md-1-2">
				<input type="password" placeholder="password" id="signUpForm-password">
			</div>
			<div class="pure-u-1 pure-u-md-1-2">
				<input type="password" placeholder="confirm password" id="signUpForm-password-confirm">
			</div>
			<div class="pure-u-1 pure-u-md-1-3">
				<div id="signUpForm-submit" class="iouButton">Sign up</div>
			</div>
		</div>
	</div>
</template>

<template name="addUser">
	<input id="addUser-input" type="text">
	<div id="addUser-submit">Add user</div>
	{{#each users}}
		{{> deleteUser}}
	{{/each}}
</template>

<template name="deleteUser">
	<p>{{username}} <span>delete</span></p>
</template>

<template name="iouForm">
	<div class="iouForm pure-g">
		<div class="pure-u-1 pure-u-md-1-6">
			<select name="" id="iouForm-user-select-primary">
			{{#each users}}
				<option value="{{_id}}">{{username}}</option>
			{{/each}}
				<option value="all">Everyone</option>
			</select>
		</div>
		
		<!-- <select name="" id="iouForm-select-method">
			<option value="owes">owes</option>
			<option value="owedby">is owed by</option>
		</select> -->
		
		<div class="pure-u-1 pure-u-md-1-6">
			<p>owes</p>
		</div>
		
		<div class="pure-u-1 pure-u-md-1-6">
			<select name="" id="iouForm-user-select-secondary">
			{{#each users}}
				<option value="{{_id}}">{{username}}</option>
			{{/each}}
				<option value="all">Everyone</option>
			</select>
		</div>
		
		<div class="pure-u-1 pure-u-md-1-6">
			<input type="text" id="iouForm-amount" placeholder="amount">
		</div>
		
		<div class="pure-u-1 pure-u-md-1-6">
			<input type="text" id="iouForm-description" placeholder="description...">
		</div>
		
		<div class="pure-u-1 pure-u-md-1-6">
			<div id="iouForm-submit" class="iouButton">Add IOU</div>
		</div>
	</div>
</template>

<template name="iouTables">
	<div class="iouTables pure-g">
		{{#each users}}
			{{> iouTable}}
		{{/each}}
	</div>
</template>

<template name="iouTable">
	<div class="iouTable pure-u-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4">
		<h3>{{user.username}}</h3>
		{{#each debts}}
			{{> iouDebt}}
		{{/each}}
	</div>
</template>

<template name="iouDebt">
	<div class="iouDebt {{#if paid}}paid{{/if}}">
		<span class="iouDebt-clear">x</span>
		<p><strong>{{this.username}}</strong> owes <strong>{{this.iouname}}</strong> Â£{{this.amount}}</p>
		<span>{{desc}}</span>
	</div>
</template>